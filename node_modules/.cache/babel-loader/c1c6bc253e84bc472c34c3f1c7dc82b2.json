{"ast":null,"code":"import _classCallCheck from \"E:\\\\Developing Project\\\\Project - Pro\\\\Recent Projects\\\\026 - Daneshgah Magazi (New)\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\Developing Project\\\\Project - Pro\\\\Recent Projects\\\\026 - Daneshgah Magazi (New)\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"E:\\\\Developing Project\\\\Project - Pro\\\\Recent Projects\\\\026 - Daneshgah Magazi (New)\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"E:\\\\Developing Project\\\\Project - Pro\\\\Recent Projects\\\\026 - Daneshgah Magazi (New)\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"E:\\\\Developing Project\\\\Project - Pro\\\\Recent Projects\\\\026 - Daneshgah Magazi (New)\\\\src\\\\containers\\\\applications\\\\ChatApplicationMenu.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { injectIntl } from \"react-intl\";\nimport { Nav, TabContent, TabPane, CardHeader, NavItem } from \"reactstrap\";\nimport { NavLink } from \"react-router-dom\";\nimport PerfectScrollbar from \"react-perfect-scrollbar\";\nimport classnames from \"classnames\";\nimport IntlMessages from \"../../helpers/IntlMessages\";\nimport ApplicationMenu from \"../../components/common/ApplicationMenu\";\nimport { changeConversation, createConversation, searchContact } from \"../../redux/actions\";\n\nvar ChatApplicationMenu = /*#__PURE__*/function (_Component) {\n  _inherits(ChatApplicationMenu, _Component);\n\n  var _super = _createSuper(ChatApplicationMenu);\n\n  function ChatApplicationMenu(props) {\n    var _this;\n\n    _classCallCheck(this, ChatApplicationMenu);\n\n    _this = _super.call(this, props);\n\n    _this.toggleAppMenu = function (tab) {\n      if (_this.props.activeTab !== tab) {\n        _this.props.toggleAppMenu(tab);\n      }\n\n      if (tab === \"messages\") {\n        _this.handleSearchContact(\"\");\n      }\n    };\n\n    _this.handleSearchContact = function (keyword) {\n      _this.setState({\n        searchKey: keyword\n      });\n\n      if (keyword.length > 0) {\n        if (_this.props.activeTab !== \"contacts\") {\n          _this.props.toggleAppMenu(\"contacts\");\n        }\n\n        _this.props.searchContact(keyword);\n      } else {\n        _this.props.searchContact(\"\");\n      }\n    };\n\n    _this.handleConversationClick = function (e, selectedUserId) {\n      _this.props.changeConversation(selectedUserId);\n\n      _this.handleSearchContact(\"\");\n    };\n\n    _this.handleContactClick = function (userId) {\n      if (_this.props.activeTab !== \"messages\") {\n        _this.props.toggleAppMenu(\"messages\");\n\n        _this.props.searchContact(\"\");\n      }\n\n      var _this$props$chatApp = _this.props.chatApp,\n          conversations = _this$props$chatApp.conversations,\n          currentUser = _this$props$chatApp.currentUser;\n      var conversation = conversations.find(function (x) {\n        return x.users.includes(currentUser.id) && x.users.includes(userId);\n      });\n\n      if (conversation) {\n        _this.props.changeConversation(userId);\n      } else {\n        _this.props.createConversation(currentUser.id, userId, conversations);\n\n        _this.props.changeConversation(userId);\n      }\n    };\n\n    _this.state = {\n      searchKey: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(ChatApplicationMenu, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props$chatApp2 = this.props.chatApp,\n          contacts = _this$props$chatApp2.contacts,\n          allContacts = _this$props$chatApp2.allContacts,\n          conversations = _this$props$chatApp2.conversations,\n          loadingConversations = _this$props$chatApp2.loadingConversations,\n          loadingContacts = _this$props$chatApp2.loadingContacts,\n          currentUser = _this$props$chatApp2.currentUser;\n      var messages = this.props.intl.messages;\n      return /*#__PURE__*/React.createElement(ApplicationMenu, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"pl-0 pr-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Nav, {\n        tabs: true,\n        className: \"card-header-tabs ml-0 mr-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(NavItem, {\n        className: \"w-50 text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        className: classnames({\n          active: this.props.activeTab === \"messages\",\n          \"nav-link\": true\n        }),\n        onClick: function onClick() {\n          _this2.toggleAppMenu(\"messages\");\n        },\n        to: \"#\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"chat.messages\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(NavItem, {\n        className: \"w-50 text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        className: classnames({\n          active: this.props.activeTab === \"contacts\",\n          \"nav-link\": true\n        }),\n        onClick: function onClick() {\n          _this2.toggleAppMenu(\"contacts\");\n        },\n        to: \"#\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"chat.contacts\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }\n      }))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pt-4 pr-4 pl-4 pb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control rounded\",\n        placeholder: messages[\"menu.search\"],\n        value: this.state.searchKey,\n        onChange: function onChange(e) {\n          return _this2.handleSearchContact(e.target.value);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(TabContent, {\n        activeTab: this.props.activeTab,\n        className: \"chat-app-tab-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(TabPane, {\n        tabId: \"messages\",\n        className: \"chat-app-tab-pane\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(PerfectScrollbar, {\n        options: {\n          suppressScrollX: true,\n          wheelPropagation: false\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pt-2 pr-4 pl-4 pb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 15\n        }\n      }, loadingContacts && loadingConversations && conversations.map(function (item, index) {\n        var otherUser = allContacts.find(function (u) {\n          return u.id === item.users.find(function (x) {\n            return x !== currentUser.id;\n          });\n        });\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: index,\n          className: \"d-flex flex-row mb-1 border-bottom pb-3 mb-3\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(NavLink, {\n          className: \"d-flex\",\n          to: \"#\",\n          onClick: function onClick(e) {\n            return _this2.handleConversationClick(e, otherUser.id);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          alt: otherUser.name,\n          src: otherUser.thumb,\n          className: \"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 27\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex flex-grow-1 min-width-zero\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"min-width-zero\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 31\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \" mb-0 truncate\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 33\n          }\n        }, otherUser.name), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"mb-1 text-muted text-small\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 33\n          }\n        }, item.lastMessageTime))))));\n      })))), /*#__PURE__*/React.createElement(TabPane, {\n        tabId: \"contacts\",\n        className: \"chat-app-tab-pane\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(PerfectScrollbar, {\n        options: {\n          suppressScrollX: true,\n          wheelPropagation: false\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pt-2 pr-4 pl-4 pb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 15\n        }\n      }, loadingContacts && contacts.filter(function (x) {\n        return x.id !== currentUser.id;\n      }).map(function (item, index) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: index,\n          className: \"d-flex flex-row mb-3 border-bottom pb-3\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(NavLink, {\n          className: \"d-flex\",\n          to: \"#\",\n          onClick: function onClick() {\n            return _this2.handleContactClick(item.id);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          alt: item.name,\n          src: item.thumb,\n          className: \"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 29\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex flex-grow-1 min-width-zero\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 31\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"min-width-zero\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"mb-0 truncate\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 35\n          }\n        }, item.name))))));\n      }))))));\n    }\n  }]);\n\n  return ChatApplicationMenu;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(_ref) {\n  var chatApp = _ref.chatApp;\n  return {\n    chatApp: chatApp\n  };\n};\n\nexport default injectIntl(connect(mapStateToProps, {\n  changeConversation: changeConversation,\n  createConversation: createConversation,\n  searchContact: searchContact\n})(ChatApplicationMenu));","map":{"version":3,"sources":["E:/Developing Project/Project - Pro/Recent Projects/026 - Daneshgah Magazi (New)/src/containers/applications/ChatApplicationMenu.js"],"names":["React","Component","connect","injectIntl","Nav","TabContent","TabPane","CardHeader","NavItem","NavLink","PerfectScrollbar","classnames","IntlMessages","ApplicationMenu","changeConversation","createConversation","searchContact","ChatApplicationMenu","props","toggleAppMenu","tab","activeTab","handleSearchContact","keyword","setState","searchKey","length","handleConversationClick","e","selectedUserId","handleContactClick","userId","chatApp","conversations","currentUser","conversation","find","x","users","includes","id","state","contacts","allContacts","loadingConversations","loadingContacts","messages","intl","active","target","value","suppressScrollX","wheelPropagation","map","item","index","otherUser","u","name","thumb","lastMessageTime","filter","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { injectIntl } from \"react-intl\";\r\nimport { Nav, TabContent, TabPane, CardHeader, NavItem } from \"reactstrap\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport PerfectScrollbar from \"react-perfect-scrollbar\";\r\nimport classnames from \"classnames\";\r\n\r\nimport IntlMessages from \"../../helpers/IntlMessages\";\r\nimport ApplicationMenu from \"../../components/common/ApplicationMenu\";\r\n\r\nimport {\r\n  changeConversation,\r\n  createConversation,\r\n  searchContact\r\n} from \"../../redux/actions\";\r\n\r\nclass ChatApplicationMenu extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchKey: \"\"\r\n    };\r\n  }\r\n  toggleAppMenu = tab => {\r\n    if (this.props.activeTab !== tab) {\r\n      this.props.toggleAppMenu(tab)\r\n    }\r\n    if (tab === \"messages\") {\r\n      this.handleSearchContact(\"\");\r\n    }\r\n  };\r\n\r\n  handleSearchContact = keyword => {\r\n    this.setState({\r\n      searchKey: keyword\r\n    });\r\n    if (keyword.length > 0) {\r\n      if (this.props.activeTab !== \"contacts\") {\r\n        this.props.toggleAppMenu(\"contacts\")\r\n       \r\n      }\r\n      this.props.searchContact(keyword);\r\n    } else {\r\n      this.props.searchContact(\"\");\r\n    }\r\n  };\r\n\r\n  handleConversationClick = (e, selectedUserId) => {\r\n    this.props.changeConversation(selectedUserId);\r\n    this.handleSearchContact(\"\");\r\n  }\r\n\r\n  handleContactClick = (userId) => {\r\n    if (this.props.activeTab !== \"messages\") {\r\n      this.props.toggleAppMenu(\"messages\")\r\n      this.props.searchContact(\"\");\r\n    }\r\n\r\n    const { conversations, currentUser } = this.props.chatApp;\r\n    const conversation = conversations.find(\r\n      x => x.users.includes(currentUser.id) && x.users.includes(userId)\r\n    );\r\n    if (conversation) {\r\n      this.props.changeConversation(userId);\r\n    } else {\r\n      this.props.createConversation(currentUser.id, userId, conversations);\r\n      this.props.changeConversation(userId);\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    const {\r\n      contacts,\r\n      allContacts,\r\n      conversations,\r\n      loadingConversations,\r\n      loadingContacts,\r\n      currentUser\r\n    } = this.props.chatApp;\r\n    const { messages } = this.props.intl;\r\n\r\n    return (\r\n      <ApplicationMenu>\r\n        <CardHeader className=\"pl-0 pr-0\">\r\n          <Nav tabs className=\"card-header-tabs ml-0 mr-0\">\r\n            <NavItem className=\"w-50 text-center\">\r\n              <NavLink\r\n                className={classnames({\r\n                  active: this.props.activeTab === \"messages\",\r\n                  \"nav-link\": true\r\n                })}\r\n                onClick={() => {\r\n                  this.toggleAppMenu(\"messages\");\r\n                }}\r\n                to=\"#\">\r\n                <IntlMessages id=\"chat.messages\" />\r\n              </NavLink>\r\n            </NavItem>\r\n            <NavItem className=\"w-50 text-center\">\r\n              <NavLink\r\n                className={classnames({\r\n                  active: this.props.activeTab === \"contacts\",\r\n                  \"nav-link\": true\r\n                })}\r\n                onClick={() => {\r\n                  this.toggleAppMenu(\"contacts\");\r\n                }}\r\n                to=\"#\">\r\n                <IntlMessages id=\"chat.contacts\" />\r\n              </NavLink>\r\n            </NavItem>\r\n          </Nav>\r\n        </CardHeader>\r\n\r\n        <div className=\"pt-4 pr-4 pl-4 pb-0\">\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control rounded\"\r\n              placeholder={messages[\"menu.search\"]}\r\n              value={this.state.searchKey}\r\n              onChange={e => this.handleSearchContact(e.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <TabContent\r\n          activeTab={this.props.activeTab}\r\n          className=\"chat-app-tab-content\"\r\n        >\r\n          <TabPane tabId=\"messages\" className=\"chat-app-tab-pane\">\r\n            <PerfectScrollbar\r\n              options={{ suppressScrollX: true, wheelPropagation: false }}\r\n            >\r\n              <div className=\"pt-2 pr-4 pl-4 pb-2\">\r\n                {loadingContacts &&\r\n                  loadingConversations &&\r\n                  conversations.map((item, index) => {\r\n                    const otherUser = allContacts.find(\r\n                      u => u.id === item.users.find(x => x !== currentUser.id)\r\n                    );\r\n                    return (\r\n                      <div\r\n                        key={index}\r\n                        className=\"d-flex flex-row mb-1 border-bottom pb-3 mb-3\"\r\n                      >\r\n                        <NavLink\r\n                          className=\"d-flex\"\r\n                          to=\"#\"\r\n                          onClick={e =>\r\n                            this.handleConversationClick(e, otherUser.id)\r\n                          }\r\n                        >\r\n                          <img\r\n                            alt={otherUser.name}\r\n                            src={otherUser.thumb}\r\n                            className=\"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall\"\r\n                          />\r\n                          <div className=\"d-flex flex-grow-1 min-width-zero\">\r\n                            <div className=\"pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero\">\r\n                              <div className=\"min-width-zero\">\r\n                                <p className=\" mb-0 truncate\">\r\n                                  {otherUser.name}\r\n                                </p>\r\n                                <p className=\"mb-1 text-muted text-small\">\r\n                                  {item.lastMessageTime}\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </NavLink>\r\n                      </div>\r\n                    );\r\n                  })}\r\n              </div>\r\n            </PerfectScrollbar>\r\n          </TabPane>\r\n          <TabPane tabId=\"contacts\" className=\"chat-app-tab-pane\">\r\n            <PerfectScrollbar\r\n              options={{ suppressScrollX: true, wheelPropagation: false }}\r\n            >\r\n              <div className=\"pt-2 pr-4 pl-4 pb-2\">\r\n                {loadingContacts &&\r\n                  contacts\r\n                    .filter(x => x.id !== currentUser.id)\r\n                    .map((item, index) => {\r\n                      return (\r\n                        <div\r\n                          key={index}\r\n                          className=\"d-flex flex-row mb-3 border-bottom pb-3\"\r\n                        >\r\n                          <NavLink\r\n                            className=\"d-flex\"\r\n                            to=\"#\"\r\n                            onClick={()=>this.handleContactClick(item.id)}\r\n                          >\r\n                            <img\r\n                              alt={item.name}\r\n                              src={item.thumb}\r\n                              className=\"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall\"\r\n                            />\r\n                            <div className=\"d-flex flex-grow-1 min-width-zero\">\r\n                              <div className=\"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero\">\r\n                                <div className=\"min-width-zero\">\r\n                                  <p className=\"mb-0 truncate\">{item.name}</p>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </NavLink>\r\n                        </div>\r\n                      );\r\n                    })}\r\n              </div>\r\n            </PerfectScrollbar>\r\n          </TabPane>\r\n        </TabContent>\r\n      </ApplicationMenu>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ chatApp }) => {\r\n  return { chatApp };\r\n};\r\nexport default injectIntl(\r\n  connect(\r\n    mapStateToProps,\r\n    {\r\n      changeConversation,\r\n      createConversation,\r\n      searchContact\r\n    }\r\n  )(ChatApplicationMenu)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}