{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\Hamed\\\\Desktop\\\\Gogo-React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\Hamed\\\\Desktop\\\\Gogo-React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Hamed\\\\Desktop\\\\Gogo-React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\Hamed\\\\Desktop\\\\Gogo-React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\Hamed\\\\Desktop\\\\Gogo-React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\Hamed\\\\Desktop\\\\Gogo-React\\\\src\\\\views\\\\app\\\\pages\\\\product\\\\data-list.js\";\nimport React, { Component, Fragment } from \"react\";\nimport { Row } from \"reactstrap\";\nimport axios from \"axios\";\nimport { servicePath } from \"../../../../constants/defaultValues\";\nimport DataListView from \"../../../../containers/pages/DataListView\";\nimport Pagination from \"../../../../containers/pages/Pagination\";\nimport ContextMenuContainer from \"../../../../containers/pages/ContextMenuContainer\";\nimport ListPageHeading from \"../../../../containers/pages/ListPageHeading\";\nimport ImageListView from \"../../../../containers/pages/ImageListView\";\nimport ThumbListView from \"../../../../containers/pages/ThumbListView\";\nimport AddNewModal from \"../../../../containers/pages/AddNewModal\";\n\nfunction collect(props) {\n  return {\n    data: props.data\n  };\n}\n\nvar apiUrl = servicePath + \"/cakes/paging\";\n\nvar DataListPages = /*#__PURE__*/function (_Component) {\n  _inherits(DataListPages, _Component);\n\n  var _super = _createSuper(DataListPages);\n\n  function DataListPages(props) {\n    var _this;\n\n    _classCallCheck(this, DataListPages);\n\n    _this = _super.call(this, props);\n\n    _this.toggleModal = function () {\n      _this.setState({\n        modalOpen: !_this.state.modalOpen\n      });\n    };\n\n    _this.changeOrderBy = function (column) {\n      _this.setState({\n        selectedOrderOption: _this.state.orderOptions.find(function (x) {\n          return x.column === column;\n        })\n      }, function () {\n        return _this.dataListRender();\n      });\n    };\n\n    _this.changePageSize = function (size) {\n      _this.setState({\n        selectedPageSize: size,\n        currentPage: 1\n      }, function () {\n        return _this.dataListRender();\n      });\n    };\n\n    _this.changeDisplayMode = function (mode) {\n      _this.setState({\n        displayMode: mode\n      });\n\n      return false;\n    };\n\n    _this.onChangePage = function (page) {\n      _this.setState({\n        currentPage: page\n      }, function () {\n        return _this.dataListRender();\n      });\n    };\n\n    _this.onSearchKey = function (e) {\n      if (e.key === \"Enter\") {\n        _this.setState({\n          search: e.target.value.toLowerCase()\n        }, function () {\n          return _this.dataListRender();\n        });\n      }\n    };\n\n    _this.onCheckItem = function (event, id) {\n      if (event.target.tagName === \"A\" || event.target.parentElement && event.target.parentElement.tagName === \"A\") {\n        return true;\n      }\n\n      if (_this.state.lastChecked === null) {\n        _this.setState({\n          lastChecked: id\n        });\n      }\n\n      var selectedItems = _this.state.selectedItems;\n\n      if (selectedItems.includes(id)) {\n        selectedItems = selectedItems.filter(function (x) {\n          return x !== id;\n        });\n      } else {\n        selectedItems.push(id);\n      }\n\n      _this.setState({\n        selectedItems: selectedItems\n      });\n\n      if (event.shiftKey) {\n        var _selectedItems;\n\n        var items = _this.state.items;\n\n        var start = _this.getIndex(id, items, \"id\");\n\n        var end = _this.getIndex(_this.state.lastChecked, items, \"id\");\n\n        items = items.slice(Math.min(start, end), Math.max(start, end) + 1);\n\n        (_selectedItems = selectedItems).push.apply(_selectedItems, _toConsumableArray(items.map(function (item) {\n          return item.id;\n        })));\n\n        selectedItems = Array.from(new Set(selectedItems));\n\n        _this.setState({\n          selectedItems: selectedItems\n        });\n      }\n\n      document.activeElement.blur();\n    };\n\n    _this.handleChangeSelectAll = function (isToggle) {\n      if (_this.state.selectedItems.length >= _this.state.items.length) {\n        if (isToggle) {\n          _this.setState({\n            selectedItems: []\n          });\n        }\n      } else {\n        _this.setState({\n          selectedItems: _this.state.items.map(function (x) {\n            return x.id;\n          })\n        });\n      }\n\n      document.activeElement.blur();\n      return false;\n    };\n\n    _this.onContextMenuClick = function (e, data, target) {\n      console.log(\"onContextMenuClick - selected items\", _this.state.selectedItems);\n      console.log(\"onContextMenuClick - action : \", data.action);\n    };\n\n    _this.onContextMenu = function (e, data) {\n      var clickedProductId = data.data;\n\n      if (!_this.state.selectedItems.includes(clickedProductId)) {\n        _this.setState({\n          selectedItems: [clickedProductId]\n        });\n      }\n\n      return true;\n    };\n\n    _this.mouseTrap = require(\"mousetrap\");\n    _this.state = {\n      displayMode: \"list\",\n      selectedPageSize: 10,\n      orderOptions: [{\n        column: \"title\",\n        label: \"Product Name\"\n      }, {\n        column: \"category\",\n        label: \"Category\"\n      }, {\n        column: \"status\",\n        label: \"Status\"\n      }],\n      pageSizes: [10, 20, 30, 50, 100],\n      categories: [{\n        label: \"Cakes\",\n        value: \"Cakes\",\n        key: 0\n      }, {\n        label: \"Cupcakes\",\n        value: \"Cupcakes\",\n        key: 1\n      }, {\n        label: \"Desserts\",\n        value: \"Desserts\",\n        key: 2\n      }],\n      selectedOrderOption: {\n        column: \"title\",\n        label: \"Product Name\"\n      },\n      dropdownSplitOpen: false,\n      modalOpen: false,\n      currentPage: 1,\n      totalItemCount: 0,\n      totalPage: 1,\n      search: \"\",\n      selectedItems: [],\n      lastChecked: null,\n      isLoading: false\n    };\n    return _this;\n  }\n\n  _createClass(DataListPages, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.dataListRender();\n      this.mouseTrap.bind([\"ctrl+a\", \"command+a\"], function () {\n        return _this2.handleChangeSelectAll(false);\n      });\n      this.mouseTrap.bind([\"ctrl+d\", \"command+d\"], function () {\n        _this2.setState({\n          selectedItems: []\n        });\n\n        return false;\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mouseTrap.unbind(\"ctrl+a\");\n      this.mouseTrap.unbind(\"command+a\");\n      this.mouseTrap.unbind(\"ctrl+d\");\n      this.mouseTrap.unbind(\"command+d\");\n    }\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(value, arr, prop) {\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i][prop] === value) {\n          return i;\n        }\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"dataListRender\",\n    value: function dataListRender() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          selectedPageSize = _this$state.selectedPageSize,\n          currentPage = _this$state.currentPage,\n          selectedOrderOption = _this$state.selectedOrderOption,\n          search = _this$state.search;\n      axios.get(\"\".concat(apiUrl, \"?pageSize=\").concat(selectedPageSize, \"&currentPage=\").concat(currentPage, \"&orderBy=\").concat(selectedOrderOption.column, \"&search=\").concat(search)).then(function (res) {\n        return res.data;\n      }).then(function (data) {\n        _this3.setState({\n          totalPage: data.totalPage,\n          items: data.data,\n          selectedItems: [],\n          totalItemCount: data.totalItem,\n          isLoading: true\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state2 = this.state,\n          currentPage = _this$state2.currentPage,\n          items = _this$state2.items,\n          displayMode = _this$state2.displayMode,\n          selectedPageSize = _this$state2.selectedPageSize,\n          totalItemCount = _this$state2.totalItemCount,\n          selectedOrderOption = _this$state2.selectedOrderOption,\n          selectedItems = _this$state2.selectedItems,\n          orderOptions = _this$state2.orderOptions,\n          pageSizes = _this$state2.pageSizes,\n          modalOpen = _this$state2.modalOpen,\n          categories = _this$state2.categories;\n      var match = this.props.match;\n      var startIndex = (currentPage - 1) * selectedPageSize;\n      var endIndex = currentPage * selectedPageSize;\n      return !this.state.isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 7\n        }\n      }) : /*#__PURE__*/React.createElement(Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"disable-text-selection\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ListPageHeading, {\n        heading: \"menu.data-list\",\n        displayMode: displayMode,\n        changeDisplayMode: this.changeDisplayMode,\n        handleChangeSelectAll: this.handleChangeSelectAll,\n        changeOrderBy: this.changeOrderBy,\n        changePageSize: this.changePageSize,\n        selectedPageSize: selectedPageSize,\n        totalItemCount: totalItemCount,\n        selectedOrderOption: selectedOrderOption,\n        match: match,\n        startIndex: startIndex,\n        endIndex: endIndex,\n        selectedItemsLength: selectedItems ? selectedItems.length : 0,\n        itemsLength: items ? items.length : 0,\n        onSearchKey: this.onSearchKey,\n        orderOptions: orderOptions,\n        pageSizes: pageSizes,\n        toggleModal: this.toggleModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(AddNewModal, {\n        modalOpen: modalOpen,\n        toggleModal: this.toggleModal,\n        categories: categories,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }\n      }, this.state.items.map(function (product) {\n        if (_this4.state.displayMode === \"imagelist\") {\n          return /*#__PURE__*/React.createElement(ImageListView, {\n            key: product.id,\n            product: product,\n            isSelect: _this4.state.selectedItems.includes(product.id),\n            collect: collect,\n            onCheckItem: _this4.onCheckItem,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 19\n            }\n          });\n        } else if (_this4.state.displayMode === \"thumblist\") {\n          return /*#__PURE__*/React.createElement(ThumbListView, {\n            key: product.id,\n            product: product,\n            isSelect: _this4.state.selectedItems.includes(product.id),\n            collect: collect,\n            onCheckItem: _this4.onCheckItem,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 19\n            }\n          });\n        } else {\n          return /*#__PURE__*/React.createElement(DataListView, {\n            key: product.id,\n            product: product,\n            isSelect: _this4.state.selectedItems.includes(product.id),\n            onCheckItem: _this4.onCheckItem,\n            collect: collect,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 19\n            }\n          });\n        }\n      }), \" \", /*#__PURE__*/React.createElement(Pagination, {\n        currentPage: this.state.currentPage,\n        totalPage: this.state.totalPage,\n        onChangePage: function onChangePage(i) {\n          return _this4.onChangePage(i);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(ContextMenuContainer, {\n        onContextMenuClick: this.onContextMenuClick,\n        onContextMenu: this.onContextMenu,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n\n  return DataListPages;\n}(Component);\n\nexport default DataListPages;","map":{"version":3,"sources":["C:/Users/Hamed/Desktop/Gogo-React/src/views/app/pages/product/data-list.js"],"names":["React","Component","Fragment","Row","axios","servicePath","DataListView","Pagination","ContextMenuContainer","ListPageHeading","ImageListView","ThumbListView","AddNewModal","collect","props","data","apiUrl","DataListPages","toggleModal","setState","modalOpen","state","changeOrderBy","column","selectedOrderOption","orderOptions","find","x","dataListRender","changePageSize","size","selectedPageSize","currentPage","changeDisplayMode","mode","displayMode","onChangePage","page","onSearchKey","e","key","search","target","value","toLowerCase","onCheckItem","event","id","tagName","parentElement","lastChecked","selectedItems","includes","filter","push","shiftKey","items","start","getIndex","end","slice","Math","min","max","map","item","Array","from","Set","document","activeElement","blur","handleChangeSelectAll","isToggle","length","onContextMenuClick","console","log","action","onContextMenu","clickedProductId","mouseTrap","require","label","pageSizes","categories","dropdownSplitOpen","totalItemCount","totalPage","isLoading","bind","unbind","arr","prop","i","get","then","res","totalItem","match","startIndex","endIndex","product"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\r\nimport { Row } from \"reactstrap\";\r\n\r\nimport axios from \"axios\";\r\n\r\nimport { servicePath } from \"../../../../constants/defaultValues\";\r\n\r\nimport DataListView from \"../../../../containers/pages/DataListView\";\r\nimport Pagination from \"../../../../containers/pages/Pagination\";\r\nimport ContextMenuContainer from \"../../../../containers/pages/ContextMenuContainer\";\r\nimport ListPageHeading from \"../../../../containers/pages/ListPageHeading\";\r\nimport ImageListView from \"../../../../containers/pages/ImageListView\";\r\nimport ThumbListView from \"../../../../containers/pages/ThumbListView\";\r\nimport AddNewModal from \"../../../../containers/pages/AddNewModal\";\r\n\r\nfunction collect(props) {\r\n  return { data: props.data };\r\n}\r\nconst apiUrl = servicePath + \"/cakes/paging\";\r\n\r\nclass DataListPages extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.mouseTrap = require(\"mousetrap\");\r\n\r\n    this.state = {\r\n      displayMode: \"list\",\r\n\r\n      selectedPageSize: 10,\r\n      orderOptions: [\r\n        { column: \"title\", label: \"Product Name\" },\r\n        { column: \"category\", label: \"Category\" },\r\n        { column: \"status\", label: \"Status\" }\r\n      ],\r\n      pageSizes: [10, 20, 30, 50, 100],\r\n\r\n      categories: [\r\n        { label: \"Cakes\", value: \"Cakes\", key: 0 },\r\n        { label: \"Cupcakes\", value: \"Cupcakes\", key: 1 },\r\n        { label: \"Desserts\", value: \"Desserts\", key: 2 }\r\n      ],\r\n\r\n      selectedOrderOption: { column: \"title\", label: \"Product Name\" },\r\n      dropdownSplitOpen: false,\r\n      modalOpen: false,\r\n      currentPage: 1,\r\n      totalItemCount: 0,\r\n      totalPage: 1,\r\n      search: \"\",\r\n      selectedItems: [],\r\n      lastChecked: null,\r\n      isLoading: false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.dataListRender();\r\n    this.mouseTrap.bind([\"ctrl+a\", \"command+a\"], () =>\r\n      this.handleChangeSelectAll(false)\r\n    );\r\n    this.mouseTrap.bind([\"ctrl+d\", \"command+d\"], () => {\r\n      this.setState({\r\n        selectedItems: []\r\n      });\r\n      return false;\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mouseTrap.unbind(\"ctrl+a\");\r\n    this.mouseTrap.unbind(\"command+a\");\r\n    this.mouseTrap.unbind(\"ctrl+d\");\r\n    this.mouseTrap.unbind(\"command+d\");\r\n  }\r\n\r\n  toggleModal = () => {\r\n    this.setState({\r\n      modalOpen: !this.state.modalOpen\r\n    });\r\n  };\r\n\r\n  changeOrderBy = column => {\r\n    this.setState(\r\n      {\r\n        selectedOrderOption: this.state.orderOptions.find(\r\n          x => x.column === column\r\n        )\r\n      },\r\n      () => this.dataListRender()\r\n    );\r\n  };\r\n  changePageSize = size => {\r\n    this.setState(\r\n      {\r\n        selectedPageSize: size,\r\n        currentPage: 1\r\n      },\r\n      () => this.dataListRender()\r\n    );\r\n  };\r\n  changeDisplayMode = mode => {\r\n    this.setState({\r\n      displayMode: mode\r\n    });\r\n    return false;\r\n  };\r\n  onChangePage = page => {\r\n    this.setState(\r\n      {\r\n        currentPage: page\r\n      },\r\n      () => this.dataListRender()\r\n    );\r\n  };\r\n\r\n  onSearchKey = e => {\r\n    if (e.key === \"Enter\") {\r\n      this.setState(\r\n        {\r\n          search: e.target.value.toLowerCase()\r\n        },\r\n        () => this.dataListRender()\r\n      );\r\n    }\r\n  };\r\n\r\n  onCheckItem = (event, id) => {\r\n    if (\r\n      event.target.tagName === \"A\" ||\r\n      (event.target.parentElement && event.target.parentElement.tagName === \"A\")\r\n    ) {\r\n      return true;\r\n    }\r\n    if (this.state.lastChecked === null) {\r\n      this.setState({\r\n        lastChecked: id\r\n      });\r\n    }\r\n\r\n    let selectedItems = this.state.selectedItems;\r\n    if (selectedItems.includes(id)) {\r\n      selectedItems = selectedItems.filter(x => x !== id);\r\n    } else {\r\n      selectedItems.push(id);\r\n    }\r\n    this.setState({\r\n      selectedItems\r\n    });\r\n\r\n    if (event.shiftKey) {\r\n      var items = this.state.items;\r\n      var start = this.getIndex(id, items, \"id\");\r\n      var end = this.getIndex(this.state.lastChecked, items, \"id\");\r\n      items = items.slice(Math.min(start, end), Math.max(start, end) + 1);\r\n      selectedItems.push(\r\n        ...items.map(item => {\r\n          return item.id;\r\n        })\r\n      );\r\n      selectedItems = Array.from(new Set(selectedItems));\r\n      this.setState({\r\n        selectedItems\r\n      });\r\n    }\r\n    document.activeElement.blur();\r\n  };\r\n\r\n  getIndex(value, arr, prop) {\r\n    for (var i = 0; i < arr.length; i++) {\r\n      if (arr[i][prop] === value) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n  handleChangeSelectAll = isToggle => {\r\n    if (this.state.selectedItems.length >= this.state.items.length) {\r\n      if (isToggle) {\r\n        this.setState({\r\n          selectedItems: []\r\n        });\r\n      }\r\n    } else {\r\n      this.setState({\r\n        selectedItems: this.state.items.map(x => x.id)\r\n      });\r\n    }\r\n    document.activeElement.blur();\r\n    return false;\r\n  };\r\n\r\n  dataListRender() {\r\n    const {\r\n      selectedPageSize,\r\n      currentPage,\r\n      selectedOrderOption,\r\n      search\r\n    } = this.state;\r\n    axios\r\n      .get(\r\n        `${apiUrl}?pageSize=${selectedPageSize}&currentPage=${currentPage}&orderBy=${\r\n          selectedOrderOption.column\r\n        }&search=${search}`\r\n      )\r\n      .then(res => {\r\n        return res.data;\r\n      })\r\n      .then(data => {\r\n        this.setState({\r\n          totalPage: data.totalPage,\r\n          items: data.data,\r\n          selectedItems: [],\r\n          totalItemCount: data.totalItem,\r\n          isLoading: true\r\n        });\r\n      });\r\n  }\r\n\r\n  onContextMenuClick = (e, data, target) => {\r\n    console.log(\r\n      \"onContextMenuClick - selected items\",\r\n      this.state.selectedItems\r\n    );\r\n    console.log(\"onContextMenuClick - action : \", data.action);\r\n  };\r\n\r\n  onContextMenu = (e, data) => {\r\n    const clickedProductId = data.data;\r\n    if (!this.state.selectedItems.includes(clickedProductId)) {\r\n      this.setState({\r\n        selectedItems: [clickedProductId]\r\n      });\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      currentPage,\r\n      items,\r\n      displayMode,\r\n      selectedPageSize,\r\n      totalItemCount,\r\n      selectedOrderOption,\r\n      selectedItems,\r\n      orderOptions,\r\n      pageSizes,\r\n      modalOpen,\r\n      categories\r\n    } = this.state;\r\n    const { match } = this.props;\r\n    const startIndex = (currentPage - 1) * selectedPageSize;\r\n    const endIndex = currentPage * selectedPageSize;\r\n\r\n    return !this.state.isLoading ? (\r\n      <div className=\"loading\" />\r\n    ) : (\r\n      <Fragment>\r\n        <div className=\"disable-text-selection\">\r\n          <ListPageHeading\r\n            heading=\"menu.data-list\"\r\n            displayMode={displayMode}\r\n            changeDisplayMode={this.changeDisplayMode}\r\n            handleChangeSelectAll={this.handleChangeSelectAll}\r\n            changeOrderBy={this.changeOrderBy}\r\n            changePageSize={this.changePageSize}\r\n            selectedPageSize={selectedPageSize}\r\n            totalItemCount={totalItemCount}\r\n            selectedOrderOption={selectedOrderOption}\r\n            match={match}\r\n            startIndex={startIndex}\r\n            endIndex={endIndex}\r\n            selectedItemsLength={selectedItems ? selectedItems.length : 0}\r\n            itemsLength={items ? items.length : 0}\r\n            onSearchKey={this.onSearchKey}\r\n            orderOptions={orderOptions}\r\n            pageSizes={pageSizes}\r\n            toggleModal={this.toggleModal}\r\n          />\r\n          <AddNewModal\r\n            modalOpen={modalOpen}\r\n            toggleModal={this.toggleModal}\r\n            categories={categories}\r\n          />\r\n          <Row>\r\n            {this.state.items.map(product => {\r\n              if (this.state.displayMode === \"imagelist\") {\r\n                return (\r\n                  <ImageListView\r\n                    key={product.id}\r\n                    product={product}\r\n                    isSelect={this.state.selectedItems.includes(product.id)}\r\n                    collect={collect}\r\n                    onCheckItem={this.onCheckItem}\r\n                  />\r\n                );\r\n              } else if (this.state.displayMode === \"thumblist\") {\r\n                return (\r\n                  <ThumbListView\r\n                    key={product.id}\r\n                    product={product}\r\n                    isSelect={this.state.selectedItems.includes(product.id)}\r\n                    collect={collect}\r\n                    onCheckItem={this.onCheckItem}\r\n                  />\r\n                );\r\n              } else {\r\n                return (\r\n                  <DataListView\r\n                    key={product.id}\r\n                    product={product}\r\n                    isSelect={this.state.selectedItems.includes(product.id)}\r\n                    onCheckItem={this.onCheckItem}\r\n                    collect={collect}\r\n                  />\r\n                );\r\n              }\r\n            })}{\" \"}\r\n            <Pagination\r\n              currentPage={this.state.currentPage}\r\n              totalPage={this.state.totalPage}\r\n              onChangePage={i => this.onChangePage(i)}\r\n            />\r\n            <ContextMenuContainer\r\n              onContextMenuClick={this.onContextMenuClick}\r\n              onContextMenu={this.onContextMenu}\r\n            />\r\n          </Row>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\nexport default DataListPages;\r\n"]},"metadata":{},"sourceType":"module"}