"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=_interopDefault(require("react"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function e(e,t,n,o,r,a){if(a!==ReactPropTypesSecret_1){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return n.PropTypes=n,n},propTypes=createCommonjsModule(function(e){e.exports=factoryWithThrowingShims()}),key="__global_unique_id__",gud=function(){return commonjsGlobal[key]=(commonjsGlobal[key]||0)+1};function makeEmptyFunction(e){return function(){return e}}var emptyFunction$1=function(){};emptyFunction$1.thatReturns=makeEmptyFunction,emptyFunction$1.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction$1.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction$1.thatReturnsNull=makeEmptyFunction(null),emptyFunction$1.thatReturnsThis=function(){return this},emptyFunction$1.thatReturnsArgument=function(e){return e};var emptyFunction_1=emptyFunction$1,warning=emptyFunction_1,warning_1=warning,implementation=createCommonjsModule(function(e,t){t.__esModule=!0;r(React);var n=r(propTypes),o=r(gud);r(warning_1);function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=1073741823;t.default=function(e,t){var r,c,u="__create-react-context-"+(0,o.default)()+"__",l=function(e){function n(){var t,o,r,i;a(this,n);for(var p=arguments.length,c=Array(p),u=0;u<p;u++)c[u]=arguments[u];return t=o=s(this,e.call.apply(e,[this].concat(c))),o.emitter=(r=o.props.value,i=[],{on:function(e){i.push(e)},off:function(e){i=i.filter(function(t){return t!==e})},get:function(){return r},set:function(e,t){r=e,i.forEach(function(e){return e(r,t)})}}),s(o,t)}return i(n,e),n.prototype.getChildContext=function(){var e;return(e={})[u]=this.emitter,e},n.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n=this.props.value,o=e.value,r=void 0;((a=n)===(s=o)?0!==a||1/a==1/s:a!=a&&s!=s)?r=0:(r="function"==typeof t?t(n,o):p,0!=(r|=0)&&this.emitter.set(e.value,r))}var a,s},n.prototype.render=function(){return this.props.children},n}(React.Component);l.childContextTypes=((r={})[u]=n.default.object.isRequired,r);var f=function(t){function n(){var e,o;a(this,n);for(var r=arguments.length,i=Array(r),p=0;p<r;p++)i[p]=arguments[p];return e=o=s(this,t.call.apply(t,[this].concat(i))),o.state={value:o.getValue()},o.onUpdate=function(e,t){0!=((0|o.observedBits)&t)&&o.setState({value:o.getValue()})},s(o,e)}return i(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?p:t},n.prototype.componentDidMount=function(){this.context[u]&&this.context[u].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?p:e},n.prototype.componentWillUnmount=function(){this.context[u]&&this.context[u].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[u]?this.context[u].get():e},n.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(React.Component);return f.contextTypes=((c={})[u]=n.default.object,c),{Provider:l,Consumer:f}},e.exports=t.default});unwrapExports(implementation);var lib=createCommonjsModule(function(e,t){t.__esModule=!0;var n=r(React),o=r(implementation);function r(e){return e&&e.__esModule?e:{default:e}}t.default=n.default.createContext||o.default,e.exports=t.default}),createReactContext=unwrapExports(lib),getDisplayName_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.displayName||e.name||("string"==typeof e&&e.length>0?e:"Unknown")}}),name=unwrapExports(getDisplayName_1),YMapsContext=createReactContext(null),withYMapsContext=function(e){var t=name(e);return function(n){return React.createElement(YMapsContext.Consumer,null,function(o){if(null===o){var r="Couldn't find Yandex.Maps API in the context. "+"Make sure that <".concat(t," /> is inside <YMaps /> provider");throw new Error(r)}return React.createElement(e,_extends({ymaps:o},n))})}},ParentContext=createReactContext(null),withParentContext=function(e){return function(t){return React.createElement(ParentContext.Consumer,null,function(n){return React.createElement(e,_extends({parent:n},t))})}},set=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t="string"==typeof t?t.split("."):t.slice();for(var r,a=e;t.length>1;)a[r=t.shift()]||(a[r]={}),a=a[r];return a[t[0]]=!0===o&&a[t[0]]||n,e},defaultQuery={lang:"ru_RU",load:"",ns:"",mode:"release"},YMapsPromiseMap={},YMaps=function(){function e(t){_classCallCheck(this,e);var n=Date.now().toString(32);this.options=t,this.namespace=t.query.ns,this.onload=e.onloadCallback+"$$"+n,this.onerror=e.onerrorCallback+"$$"+n,this.api,this.promise}return _createClass(e,[{key:"getApi",value:function(){return"undefined"!=typeof window&&this.namespace?window[this.namespace]:this.api}},{key:"setApi",value:function(e){return this.api=e}},{key:"getPromise",value:function(){return this.namespace?YMapsPromiseMap[this.namespace]:this.promise}},{key:"setPromise",value:function(e){return this.namespace?YMapsPromiseMap[this.namespace]=this.promise=e:this.promise=e}},{key:"load",value:function(){var t=this;if(this.getApi())return Promise.resolve(this.setApi(this.getApi()));if(this.getPromise())return this.setPromise(this.getPromise());var n=Object.assign({onload:this.onload,onerror:this.onerror},defaultQuery,this.options.query),o=Object.keys(n).map(function(e){return"".concat(e,"=").concat(n[e])}).join("&"),r=[e.getBaseUrl(this.options.enterprise),this.options.version,"?"+o].join("/"),a=new Promise(function(e,n){window[t.onload]=function(n){delete window[t.onload],n.loadModule=t.loadModule.bind(t),n.ready(function(){return e(t.setApi(n))})},window[t.onerror]=function(e){delete window[t.onerror],n(e)},t.fetchScript(r).catch(window[t.onerror])});return this.setPromise(a)}},{key:"fetchScript",value:function(e){var t=this;return new Promise(function(n,o){t.script=document.createElement("script"),t.script.type="text/javascript",t.script.onload=n,t.script.onerror=o,t.script.src=e,t.script.async="async",document.head.appendChild(t.script)})}},{key:"loadModule",value:function(e){var t=this;return new Promise(function(n,o){t.getApi().modules.require(e,function(o){set(t.api,e,o,!0),n(o)},o,t.getApi())})}}]),e}();YMaps._name="__react-yandex-maps__",YMaps.onloadCallback="__yandex-maps-api-onload__",YMaps.onerrorCallback="__yandex-maps-api-onerror__",YMaps.getBaseUrl=function(e){return"https://".concat(e?"enterprise.":"","api-maps.yandex.ru")};var Provider=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).ymaps=new YMaps(e),n}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){!0===this.props.preload&&this.ymaps.load()}},{key:"render",value:function(){return React.createElement(YMapsContext.Provider,{value:this.ymaps},this.props.children)}}]),t}();Provider.defaultProps={version:"2.1",enterprise:!1,query:{lang:"ru_RU",load:"",ns:""},preload:!1};var omit=function(e,t){var n={};for(var o in e)-1===t.indexOf(o)&&(n[o]=e[o]);return n};function withYMaps(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=function(o){function r(){var e;return _classCallCheck(this,r),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this))).state={loading:!0},e._isMounted=!1,e}return _inherits(r,React.Component),_createClass(r,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.props.ymaps.load().then(function(t){return Promise.all(n.concat(e.props.modules).map(t.loadModule)).then(function(){!0===e._isMounted&&e.setState({loading:!1},function(){e.props.onLoad(t)})})}).catch(function(t){!0===e._isMounted&&e.props.onError(t)})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var n=this.props.ymaps,o=this.state.loading,r=!1===t||!1===o,a=omit(this.props,["onLoad","onError","modules","ymaps"]);return r&&React.createElement(e,_extends({ymaps:n.getApi()},a))}}]),r}();return o.defaultProps={onLoad:Function.prototype,onError:Function.prototype,modules:[]},withYMapsContext(o)}var EVENTS_REGEX=/^on(?=[A-Z])/;function separateEvents(e){return Object.keys(e).reduce(function(t,n){if(EVENTS_REGEX.test(n)){var o=n.replace(EVENTS_REGEX,"").toLowerCase();t._events[o]=e[n]}else t[n]=e[n];return t},{_events:{}})}function addEvent(e,t,n){"function"==typeof n&&e.events.add(t,n)}function removeEvent(e,t,n){"function"==typeof n&&e.events.remove(t,n)}function updateEvents(e,t,n){Object.keys(Object.assign({},t,n)).forEach(function(o){t[o]!==n[o]&&(removeEvent(e,o,t[o]),addEvent(e,o,n[o]))})}var defaultName=function(e){return"default"+e.charAt(0).toUpperCase()+e.slice(1)};function isControlledProp(e,t){return void 0!==e[t]||void 0===e[defaultName(t)]}function getProp(e,t,n){return(isControlledProp(e,t)?e[t]:e[defaultName(t)])||n}var Map=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).state={instance:null},e._parentElement=null,e._getRef=function(t){e._parentElement=t},e}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){var e=t.mountObject(this._parentElement,this.props.ymaps.Map,this.props);this.setState({instance:e})}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountObject(this.state.instance,this.props)}},{key:"render",value:function(){var e=t.getParentElementSize(this.props),n=separateEvents(this.props),o=omit(n,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return React.createElement(ParentContext.Provider,{value:this.state.instance},React.createElement("div",_extends({ref:this._getRef},e,o),this.props.children))}}],[{key:"getParentElementSize",value:function(e){var t=e.width,n=e.height,o=e.style,r=e.className;return void 0!==o||void 0!==r?Object.assign({},o&&{style:o},r&&{className:r}):{style:{width:t,height:n}}}},{key:"mountObject",value:function(e,t,n){var o=separateEvents(n),r=o.instanceRef,a=o._events,s=new t(e,getProp(n,"state"),getProp(n,"options"));return Object.keys(a).forEach(function(e){return addEvent(s,e,a[e])}),"function"==typeof r&&r(s),s}},{key:"updateObject",value:function(e,t,n){var o=separateEvents(n),r=o._events,a=o.instanceRef,s=separateEvents(t),i=s._events,p=s.instanceRef;if(isControlledProp(n,"state")){var c=getProp(t,"state",{}),u=getProp(n,"state",{});c.type!==u.type&&e.setType(u.type),c.behaviors!==u.behaviors&&(c.behaviors&&e.behaviors.disable(c.behaviors),u.behaviors&&e.behaviors.enable(u.behaviors)),c.zoom!==u.zoom&&e.setZoom(u.zoom),c.center!==u.center&&e.setCenter(u.center),u.bounds&&c.bounds!==u.bounds&&e.setBounds(u.bounds)}if(isControlledProp(n,"options")){var l=getProp(t,"options"),f=getProp(n,"options",{});l!==f&&e.options.set(f)}getProp(t,"width")===getProp(n,"width")&&getProp(t,"height")===getProp(n,"height")||e.container.fitToViewport(),updateEvents(e,i,r),p!==a&&("function"==typeof p&&p(null),"function"==typeof a&&a(e))}},{key:"unmountObject",value:function(e,t){var n=separateEvents(t),o=n.instanceRef,r=n._events;null!==e&&(Object.keys(r).forEach(function(t){return removeEvent(e,t,r[t])}),e.destroy(),"function"==typeof o&&o(null))}}]),t}();Map.defaultProps={width:320,height:240};var _Map=withYMaps(Map,!0,["Map"]),Clusterer=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).state={instance:null},e}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){var e=t.mountObject(this.props.ymaps.Clusterer,this.props);this.setState({instance:e})}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountObject(this.state.instance,this.props)}},{key:"render",value:function(){return React.createElement(ParentContext.Provider,{value:this.state.instance},this.props.children)}}],[{key:"mountObject",value:function(e,t){var n=separateEvents(t),o=n.instanceRef,r=n.parent,a=n._events,s=new e(getProp(t,"options"));if(Object.keys(a).forEach(function(e){return addEvent(s,e,a[e])}),r.geoObjects&&"function"==typeof r.geoObjects.add)r.geoObjects.add(s);else{if(!r.add||"function"!=typeof r.add)throw new Error("No parent found to mount Clusterer");r.add(s)}return"function"==typeof o&&o(s),s}},{key:"updateObject",value:function(e,t,n){var o=separateEvents(n),r=o._events,a=o.instanceRef,s=separateEvents(t),i=s._events,p=s.instanceRef;if(isControlledProp(n,"options")){var c=getProp(t,"options"),u=getProp(n,"options");c!==u&&e.options.set(u)}updateEvents(e,i,r),p!==a&&("function"==typeof p&&p(null),"function"==typeof a&&a(e))}},{key:"unmountObject",value:function(e,t){var n=separateEvents(t),o=n.instanceRef,r=n.parent,a=n._events;null!==e&&(Object.keys(a).forEach(function(t){return removeEvent(e,t,a[t])}),r.geoObjects&&"function"==typeof r.geoObjects.remove?r.geoObjects.remove(e):r.remove&&"function"==typeof r.remove&&r.remove(e),"function"==typeof o&&o(null))}}]),t}(),Clusterer$1=withParentContext(withYMaps(Clusterer,!0,["Clusterer"])),ObjectManager=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).state={instance:null},e}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){var e=t.mountObject(this.props.ymaps.ObjectManager,this.props);this.setState({instance:e})}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountObject(this.state.instance,this.props)}},{key:"render",value:function(){return null}}],[{key:"mountObject",value:function(e,t){var n=separateEvents(t),o=n.instanceRef,r=n.parent,a=n._events,s=getProp(t,"options"),i=getProp(t,"features"),p=getProp(t,"filter"),c=getProp(t,"objects"),u=getProp(t,"clusters"),l=new e(s);if(l.add(i||[]),l.setFilter(p),l.objects.options.set(c),l.clusters.options.set(u),Object.keys(a).forEach(function(e){return addEvent(l,e,a[e])}),r.geoObjects&&"function"==typeof r.geoObjects.add)r.geoObjects.add(l);else{if(!r.add||"function"!=typeof r.add)throw new Error("No parent found to mount ObjectManager");r.add(l)}return"function"==typeof o&&o(l),l}},{key:"updateObject",value:function(e,t,n){var o=separateEvents(n),r=o._events,a=o.instanceRef,s=separateEvents(t),i=s._events,p=s.instanceRef;if(isControlledProp(n,"options")){var c=getProp(t,"options"),u=getProp(n,"options");c!==u&&e.options.set(u)}if(isControlledProp(n,"objects")){var l=getProp(t,"objects"),f=getProp(n,"objects");l!==f&&e.objects.options.set(f)}if(isControlledProp(n,"clusters")){var y=getProp(t,"clusters"),d=getProp(n,"clusters");y!==d&&e.clusters.options.set(d)}if(isControlledProp(n,"filter")){var m=getProp(t,"filter"),v=getProp(n,"filter");m!==v&&e.options.set(v)}if(isControlledProp(n,"features")){var h=getProp(t,"features"),b=getProp(n,"features");h!==b&&(e.remove(h),e.add(b))}updateEvents(e,i,r),p!==a&&("function"==typeof p&&p(null),"function"==typeof a&&a(e))}},{key:"unmountObject",value:function(e,t){var n=separateEvents(t),o=n.instanceRef,r=n.parent,a=n._events;null!==e&&(Object.keys(a).forEach(function(t){return removeEvent(e,t,a[t])}),r.geoObjects&&"function"==typeof r.geoObjects.remove?r.geoObjects.remove(e):r.remove&&"function"==typeof r.remove&&r.remove(e),"function"==typeof o&&o(null))}}]),t}(),ObjectManager$1=withParentContext(withYMaps(ObjectManager,!0,["ObjectManager"])),Panorama=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).state={instance:null},e}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;this.props.ymaps.panorama.isSupported()&&t.mountObject(this.props.ymaps.panorama,this.props).then(function(t){return e.setState({instance:t})})}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountObject(this.state.instance,this.props)}},{key:"render",value:function(){var e=t.getParentElementSize(this.props);return React.createElement("div",_extends({id:"player"},e))}}],[{key:"getParentElementSize",value:function(e){var t=e.width,n=e.height,o=e.style,r=e.className;return void 0!==o||void 0!==r?Object.assign({},o&&{style:o},r&&{className:r}):{style:{width:t,height:n}}}},{key:"mountObject",value:function(e,t){var n=separateEvents(t),o=n.instanceRef,r=n._events,a=getProp(t,"coordinates"),s=getProp(t,"options");return new Promise(function(t,n){e.locate(a).done(function(n){if(n.length>0){var a=new e.Player("player",n[0],s);"function"==typeof o&&o(a),Object.keys(r).forEach(function(e){return addEvent(a,e,r[e])}),t(a)}},function(){n()})})}},{key:"updateObject",value:function(e,t,n){var o=separateEvents(n),r=o._events,a=o.instanceRef,s=separateEvents(t),i=s._events,p=s.instanceRef;if(isControlledProp(n,"options")){var c=getProp(t,"options"),u=getProp(n,"options");c!==u&&e.options.set(u)}updateEvents(e,i,r),p!==a&&("function"==typeof p&&p(null),"function"==typeof a&&a(e))}},{key:"unmountObject",value:function(e,t){var n=separateEvents(t),o=n.instanceRef,r=n._events;null!==e&&(Object.keys(r).forEach(function(t){return removeEvent(e,t,r[t])}),"function"==typeof o&&o(null))}}]),t}(),Panorama$1=withParentContext(withYMaps(Panorama,!0,["panorama.isSupported","panorama.locate","panorama.createPlayer","panorama.Player"]));Panorama.defaultProps={width:320,height:240};var BaseGeoObject=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).state={instance:null},e}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){var e=this.props,n=e.name,o=e.dangerZone,r=e.ymaps,a=t.mountObject(o&&o.modifyConstructor?o.modifyConstructor(r[n]):r[n],this.props);this.setState({instance:a})}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountObject(this.state.instance,this.props)}},{key:"render",value:function(){return null}}],[{key:"mountObject",value:function(e,t){var n=separateEvents(t),o=n.instanceRef,r=n.parent,a=n._events,s=new e(getProp(t,"geometry"),getProp(t,"properties"),getProp(t,"options"));if(Object.keys(a).forEach(function(e){return addEvent(s,e,a[e])}),r&&r.geoObjects&&"function"==typeof r.geoObjects.add)r.geoObjects.add(s);else{if(!r||!r.add||"function"!=typeof r.add)throw new Error("No parent found to mount ".concat(t.name));r.add(s)}return"function"==typeof o&&o(s),s}},{key:"updateObject",value:function(e,t,n){var o=separateEvents(n),r=o._events,a=o.instanceRef,s=separateEvents(t),i=s._events,p=s.instanceRef;if(isControlledProp(n,"geometry")){var c=getProp(t,"geometry",{}),u=getProp(n,"geometry",{});Array.isArray(u)&&u!==c?Array.isArray(u[0])&&"number"==typeof u[1]?(e.geometry.setCoordinates(u[0]),e.geometry.setRadius(u[1])):e.geometry.setCoordinates(u):"object"===_typeof(u)&&(u.coordinates!==c.coordinates&&e.geometry.setCoordinates(u.coordinates),u.radius!==c.radius&&e.geometry.setRadius(u.radius))}if(isControlledProp(n,"properties")){var l=getProp(t,"properties"),f=getProp(n,"properties");l!==f&&e.properties.set(f)}if(isControlledProp(n,"options")){var y=getProp(t,"options"),d=getProp(n,"options");y!==d&&e.options.set(d)}updateEvents(e,i,r),p!==a&&("function"==typeof p&&p(null),"function"==typeof a&&a(e))}},{key:"unmountObject",value:function(e,t){var n=separateEvents(t),o=n.instanceRef,r=n.parent,a=n._events;null!==e&&(Object.keys(a).forEach(function(t){return removeEvent(e,t,a[t])}),r.geoObjects&&"function"==typeof r.geoObjects.remove?r.geoObjects.remove(e):r.remove&&"function"==typeof r.remove&&r.remove(e),"function"==typeof o&&o(null))}}]),t}();function createGeoObject(e,t,n){return withParentContext(withYMaps(function(t){return React.createElement(BaseGeoObject,_extends({name:e,dangerZone:n?{modifyConstructor:n}:void 0},t))},!0,[e]))}var GeoObjectGeometryPropTypes=propTypes.shape({type:propTypes.oneOf(["Point","LineString","Rectangle","Polygon","Circle"]).isRequired,coordinates:propTypes.oneOfType([propTypes.arrayOf(propTypes.number),propTypes.arrayOf(propTypes.arrayOf(propTypes.number)),propTypes.arrayOf(propTypes.arrayOf(propTypes.arrayOf(propTypes.number)))]).isRequired,radius:propTypes.number}),GeoObject=createGeoObject("GeoObject",!1,function(e){var t=e;function n(e,n,o){t.call(this,{geometry:e,properties:n},o)}return n.prototype=e.prototype,n}),CircleGeometryPropTypes=propTypes.arrayOf(propTypes.oneOfType([propTypes.number,propTypes.arrayOf(propTypes.number)])),Circle=createGeoObject("Circle"),PlacemarkGeometryPropTypes=propTypes.arrayOf(propTypes.number),Placemark=createGeoObject("Placemark"),PolygonGeometryPropTypes=propTypes.arrayOf(propTypes.arrayOf(propTypes.arrayOf(propTypes.number))),Polygon=createGeoObject("Polygon"),PolylineGeometryPropTypes=propTypes.arrayOf(propTypes.arrayOf(propTypes.number)),Polyline=createGeoObject("Polyline"),RectangleGeometryPropTypes=propTypes.arrayOf(propTypes.arrayOf(propTypes.number)),Rectangle=createGeoObject("Rectangle"),BaseControl=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).state={instance:null},e}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){var e=t.mountControl(this.props.ymaps.control[this.props.name],this.props);this.setState({instance:e})}},{key:"componentDidUpdate",value:function(e){null!==this.state.instance&&t.updateControl(this.state.instance,e,this.props)}},{key:"componentWillUnmount",value:function(){t.unmountControl(this.state.instance,this.props)}},{key:"render",value:function(){return React.createElement(ParentContext.Provider,{value:this.state.instance},this.props.children)}}],[{key:"mountControl",value:function(e,t){var n=separateEvents(t),o=n.instanceRef,r=n.parent,a=n.lazy,s=n._events,i=new e({data:getProp(t,"data"),options:getProp(t,"options"),state:getProp(t,"state"),mapTypes:getProp(t,"mapTypes"),lazy:a});if(Object.keys(s).forEach(function(e){return addEvent(i,e,s[e])}),r&&r.controls&&"function"==typeof r.controls.add)r.controls.add(i);else{if(!r||!r.add||"function"!=typeof r.add)throw new Error("No parent found to mount ".concat(t.name));r.add(i)}return"function"==typeof o&&o(i),i}},{key:"updateControl",value:function(e,t,n){var o=separateEvents(n),r=o._events,a=o.instanceRef,s=separateEvents(t),i=s._events,p=s.instanceRef;if(isControlledProp(n,"options")){var c=getProp(t,"options"),u=getProp(n,"options");c!==u&&e.options.set(u)}if(isControlledProp(n,"data")){var l=getProp(t,"data"),f=getProp(n,"data");l!==f&&e.data.set(f)}if(isControlledProp(n,"state")){var y=getProp(t,"state"),d=getProp(n,"state");y!==d&&e.state.set(d)}if(isControlledProp(n,"mapTypes")){var m=getProp(t,"mapTypes"),v=getProp(n,"mapTypes");m!==v&&(e.removeAllMapTypes(),v.forEach(function(t){return e.addMapType(t)}))}updateEvents(e,i,r),p!==a&&("function"==typeof p&&p(null),"function"==typeof a&&a(e))}},{key:"unmountControl",value:function(e,t){var n=separateEvents(t),o=n.instanceRef,r=n.parent,a=n._events;null!==e&&(Object.keys(a).forEach(function(t){return removeEvent(e,t,a[t])}),r.controls&&"function"==typeof r.controls.remove?r.controls.remove(e):r.remove&&"function"==typeof r.remove&&r.remove(e),"function"==typeof o&&o(null))}}]),t}();function createControl(e,t){return withParentContext(withYMaps(function(t){return React.createElement(BaseControl,_extends({name:e},t))},!0,["control.".concat(e)]))}var Button=createControl("Button"),FullscreenControl=createControl("FullscreenControl"),GeolocationControl=createControl("GeolocationControl"),ListBox=createControl("ListBox"),ListBoxItem=createControl("ListBoxItem"),RouteButton=createControl("RouteButton"),RouteEditor=createControl("RouteEditor"),RoutePanel=createControl("RoutePanel"),RulerControl=createControl("RulerControl"),SearchControl=createControl("SearchControl"),TrafficControl=createControl("TrafficControl"),TypeSelector=createControl("TypeSelector"),ZoomControl=createControl("ZoomControl");exports.Button=Button,exports.Circle=Circle,exports.Clusterer=Clusterer$1,exports.FullscreenControl=FullscreenControl,exports.GeoObject=GeoObject,exports.GeolocationControl=GeolocationControl,exports.ListBox=ListBox,exports.ListBoxItem=ListBoxItem,exports.Map=_Map,exports.ObjectManager=ObjectManager$1,exports.Panorama=Panorama$1,exports.Placemark=Placemark,exports.Polygon=Polygon,exports.Polyline=Polyline,exports.Rectangle=Rectangle,exports.RouteButton=RouteButton,exports.RouteEditor=RouteEditor,exports.RoutePanel=RoutePanel,exports.RulerControl=RulerControl,exports.SearchControl=SearchControl,exports.TrafficControl=TrafficControl,exports.TypeSelector=TypeSelector,exports.YMaps=Provider,exports.ZoomControl=ZoomControl,exports.withYMaps=withYMaps;
//# sourceMappingURL=react-yandex-maps.cjs.production.min.js.map
